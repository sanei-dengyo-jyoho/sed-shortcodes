(function(e,g){if(!e.jQuery){return false}var f=e.jQuery,d=0,b={error:"Error. Try again.",loading:"Loading",lang:"en"},c=function(i,j){var h="wiki-"+(d++);i.data("wikiUp",h).bind("mouseover",function(){if(!i.children(".tooltip").length){i.append('<div class="tooltip"><span></span><div id="'+h+'"></div></div>');a(i,j)}})},a=function(h,j){var m=f("#"+h.data("wikiUp")),l=h.data("lang")||j.lang,k=h.data("wiki"),i="http://"+l+".wikipedia.org/w/api.php?callback=?&action=parse&page="+k+"&prop=text&format=json&section=0";f.ajax({type:"GET",url:i,data:{},async:true,contentType:"application/json; charset=utf-8",dataType:"jsonp",success:function(n){var r=false,p=0,o=f(n.parse.text["*"]),q;while(r===false){r=true;q=o.filter("p:eq("+p+")").html();if(q.indexOf("<span")===0){p++;r=false}}m.html(q).find("a").attr("target","_blank").not(".references a").attr("href",function(t,s){if(s.indexOf("http")!==0){s="http://"+l+".wikipedia.org"+s}return s}).end().end().find("sup.reference").remove()},error:function(n,p,o){m.html(j.error)},beforeSend:function(n){m.html(j.loading)}})};f.fn.wikiUp=function(h){h=f.extend(true,{},b,h);return this.each(function(){var i=f(this);if(!i.data("wikiUp")){c(i,h)}})};f(function(){f("data[data-wiki]").wikiUp()})}(this));