!function(a){wikiQuantity=0,DEFAULTS={error:"Error. Try again.",loading:"Loading",lang:"en"},wikiUp=function(c,d){var b="wiki-"+(wikiQuantity++);c.data("wikiUp",b).bind("mouseover",function(){if(!c.children(".tooltip").length){c.append('<div class="tooltip"><span></span><div id="'+b+'"></div></div>');wikiLoad(c,d)}})},wikiLoad=function(b,d){var g=a("#"+b.data("wikiUp")),f=b.data("lang")||d.lang,e=b.data("wiki"),c="http://"+f+".wikipedia.org/w/api.php?callback=?&action=parse&page="+e+"&prop=text&format=json&section=0";a.ajax({type:"GET",url:c,data:{},async:true,contentType:"application/json; charset=utf-8",dataType:"jsonp",success:function(h){var l=false,j=0,i=a(h.parse.text["*"]),k;while(l==false){l=true;k=i.filter("p:eq("+j+")").html();if(k.indexOf("<span")==0){j++;l=false}}g.html(k).find("a").attr("target","_blank").not(".references a").attr("href",function(n,m){if(m.indexOf("http")!=0){m="http://"+f+".wikipedia.org"+m}return m}).end().end().find("sup.reference").remove()},error:function(h,j,i){g.html(d.error)},beforeSend:function(h){g.html(d.loading)}})};a.fn.wikiUp=function(b){b=a.extend(true,{},DEFAULTS,b);return this.each(function(){var c=a(this);if(!c.data("wikiUp")){wikiUp(c,b)}})};a(function(){a("data[data-wiki]").wikiUp()})}(window.jQuery);